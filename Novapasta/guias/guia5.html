<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Controle de Acesso - Sistema Escolar</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }
        
        .view {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            border: 2px solid;
        }
        
        .admin-view {
            border-color: #e74c3c;
        }
        
        .student-view {
            border-color: #3498db;
        }
        
        .view h2 {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }
        
        .admin-view h2 {
            color: #e74c3c;
            border-bottom-color: #e74c3c;
        }
        
        .student-view h2 {
            color: #3498db;
            border-bottom-color: #3498db;
        }
        
        .menu-item {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid;
            display: flex;
            align-items: center;
            transition: all 0.3s;
        }
        
        .menu-item.admin-only {
            border-left-color: #e74c3c;
            background: #ffeaea;
        }
        
        .menu-item.student-access {
            border-left-color: #3498db;
            background: #e8f4fd;
        }
        
        .menu-item.hidden {
            display: none;
        }
        
        .menu-item::before {
            margin-right: 10px;
            font-size: 1.2em;
        }
        
        .dashboard::before { content: "üìä"; }
        .users::before { content: "üë•"; }
        .grades::before { content: "üìù"; }
        .profile::before { content: "üë§"; }
        .materials::before { content: "üìö"; }
        .settings::before { content: "‚öôÔ∏è"; }
        
        .code-example {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
        }
        
        .code-comment {
            color: #6a9955;
            font-style: italic;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-variable {
            color: #9cdcfe;
        }
        
        .code-string {
            color: #ce9178;
        }
        
        .explanation {
            background: #e8f4fd;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
            border-left: 4px solid #3498db;
        }
        
        .step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #27ae60;
        }
        
        .step-number {
            background: #27ae60;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: 40px;
        }
        
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üîí Controle de Acesso no Sistema Escolar</h1>
            <p class="subtitle">Como ocultar funcionalidades administrativas para alunos</p>
        </header>
        
        <div class="content">
            <div class="explanation">
                <h2>üéØ Conceito do Controle de Acesso</h2>
                <p>O sistema verifica o <strong>perfil do usu√°rio logado</strong> e mostra apenas as funcionalidades permitidas para cada perfil.</p>
                <p><strong>Administradores</strong> veem tudo | <strong>Alunos</strong> veem apenas o essencial</p>
            </div>
            
            <div class="comparison">
                <!-- Vis√£o do Administrador -->
                <div class="view admin-view">
                    <h2>üëë Vis√£o do ADMINISTRADOR</h2>
                    <div class="menu-item admin-only">
                        <strong>Painel Administrativo</strong>
                        <small>(Apenas admin)</small>
                    </div>
                    <div class="menu-item admin-only">
                        <strong>Gerenciar Usu√°rios</strong>
                        <small>(Apenas admin)</small>
                    </div>
                    <div class="menu-item admin-only">
                        <strong>Configura√ß√µes do Sistema</strong>
                        <small>(Apenas admin)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Ver Notas</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Materiais de Aula</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Meu Perfil</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                </div>
                
                <!-- Vis√£o do Aluno -->
                <div class="view student-view">
                    <h2>üéì Vis√£o do ALUNO</h2>
                    <div class="menu-item hidden">
                        <strong>Painel Administrativo</strong>
                        <small>(OCULTO para aluno)</small>
                    </div>
                    <div class="menu-item hidden">
                        <strong>Gerenciar Usu√°rios</strong>
                        <small>(OCULTO para aluno)</small>
                    </div>
                    <div class="menu-item hidden">
                        <strong>Configura√ß√µes do Sistema</strong>
                        <small>(OCULTO para aluno)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Ver Notas</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Materiais de Aula</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                    <div class="menu-item student-access">
                        <strong>Meu Perfil</strong>
                        <small>(Aluno + Admin)</small>
                    </div>
                </div>
            </div>
            
            <div class="code-example">
                <span class="code-comment">// 1. VERIFICA√á√ÉO DE PERFIL NO PHP</span><br>
                <span class="code-comment">// Arquivo: dashboard.php</span><br><br>
                
                <span class="code-keyword">&lt;?php</span><br>
                <span class="code-variable">session_start</span>();<br><br>
                
                <span class="code-comment">// Verifica se est√° logado</span><br>
                <span class="code-keyword">if</span> (!<span class="code-variable">isset</span>(<span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>])) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">header</span>(<span class="code-string">"Location: login.php"</span>);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">exit</span>();<br>
                }<br><br>
                
                <span class="code-comment">// Define vari√°veis para controle de acesso</span><br>
                <span class="code-variable">$eh_admin</span> = (<span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>] == <span class="code-string">'admin'</span>);<br>
                <span class="code-variable">$eh_aluno</span> = (<span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>] == <span class="code-string">'aluno'</span>);<br>
                <span class="code-keyword">?&gt;</span><br>
            </div>
            
            <div class="step">
                <h3><span class="step-number">1</span> Controle no Backend (PHP)</h3>
                <p>Impede acesso direto a p√°ginas administrativas via URL</p>
                
                <div class="code-example">
                    <span class="code-comment">// No topo de CADA p√°gina administrativa</span><br>
                    <span class="code-keyword">&lt;?php</span><br>
                    <span class="code-variable">session_start</span>();<br>
                    <span class="code-keyword">if</span> (!<span class="code-variable">isset</span>(<span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>]) || <span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>] != <span class="code-string">'admin'</span>) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">header</span>(<span class="code-string">"Location: acesso_negado.php"</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">exit</span>();<br>
                    }<br>
                    <span class="code-keyword">?&gt;</span><br>
                </div>
            </div>
            
            <div class="step">
                <h3><span class="step-number">2</span> Controle no Frontend (HTML)</h3>
                <p>Oculta visualmente os elementos que o aluno n√£o pode acessar</p>
                
                <div class="code-example">
                    <span class="code-comment">&lt;!-- Menu de Navega√ß√£o --&gt;</span><br>
                    <span class="code-keyword">&lt;nav&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-comment">&lt;!-- Link para todos --&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-keyword">&lt;a</span> <span class="code-variable">href=</span><span class="code-string">"perfil.php"</span><span class="code-keyword">&gt;</span>üë§ Meu Perfil<span class="code-keyword">&lt;/a&gt;</span><br>
                    <br>
                    &nbsp;&nbsp;<span class="code-comment">&lt;!-- Link APENAS para administradores --&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-keyword">&lt;?php if</span> (<span class="code-variable">$eh_admin</span>): <span class="code-keyword">?&gt;</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">&lt;a</span> <span class="code-variable">href=</span><span class="code-string">"admin_usuarios.php"</span><span class="code-keyword">&gt;</span>üë• Gerenciar Usu√°rios<span class="code-keyword">&lt;/a&gt;</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">&lt;a</span> <span class="code-variable">href=</span><span class="code-string">"admin_config.php"</span><span class="code-keyword">&gt;</span>‚öôÔ∏è Configura√ß√µes<span class="code-keyword">&lt;/a&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-keyword">&lt;?php endif; ?&gt;</span><br>
                    <br>
                    &nbsp;&nbsp;<span class="code-comment">&lt;!-- Link APENAS para alunos --&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-keyword">&lt;?php if</span> (<span class="code-variable">$eh_aluno</span>): <span class="code-keyword">?&gt;</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">&lt;a</span> <span class="code-variable">href=</span><span class="code-string">"minhas_notas.php"</span><span class="code-keyword">&gt;</span>üìù Minhas Notas<span class="code-keyword">&lt;/a&gt;</span><br>
                    &nbsp;&nbsp;<span class="code-keyword">&lt;?php endif; ?&gt;</span><br>
                    <span class="code-keyword">&lt;/nav&gt;</span><br>
                </div>
            </div>
            
            <div class="step">
                <h3><span class="step-number">3</span> Estrutura do Banco de Dados</h3>
                <p>Tabela de usu√°rios com campo de perfil para controle</p>
                
                <div class="code-example">
                    <span class="code-comment">-- Tabela de usu√°rios</span><br>
                    <span class="code-keyword">CREATE TABLE</span> usuarios (<br>
                    &nbsp;&nbsp;id <span class="code-keyword">INT AUTO_INCREMENT PRIMARY KEY</span>,<br>
                    &nbsp;&nbsp;rm <span class="code-keyword">VARCHAR</span>(20) <span class="code-keyword">UNIQUE NOT NULL</span>,<br>
                    &nbsp;&nbsp;senha_hash <span class="code-keyword">VARCHAR</span>(255) <span class="code-keyword">NOT NULL</span>,<br>
                    &nbsp;&nbsp;perfil <span class="code-keyword">ENUM</span>(<span class="code-string">'admin'</span>, <span class="code-string">'aluno'</span>) <span class="code-keyword">DEFAULT</span> <span class="code-string">'aluno'</span><br>
                    );<br><br>
                    
                    <span class="code-comment">-- Usu√°rio administrador padr√£o</span><br>
                    <span class="code-keyword">INSERT INTO</span> usuarios (rm, senha_hash, perfil)<br>
                    <span class="code-keyword">VALUES</span> (<span class="code-string">'admin'</span>, <span class="code-string">'$2y$10$...'</span>, <span class="code-string">'admin'</span>);<br>
                </div>
            </div>
            
            <div class="step">
                <h3><span class="step-number">4</span> Processo de Login</h3>
                <p>Define o perfil na sess√£o quando o usu√°rio faz login</p>
                
                <div class="code-example">
                    <span class="code-comment">// processa_login.php</span><br>
                    <span class="code-keyword">&lt;?php</span><br>
                    <span class="code-variable">session_start</span>();<br>
                    <span class="code-variable">include</span>(<span class="code-string">"conexaoBD.php"</span>);<br><br>
                    
                    <span class="code-keyword">if</span> (<span class="code-variable">$_POST</span>[<span class="code-string">'rm'</span>] && <span class="code-variable">$_POST</span>[<span class="code-string">'senha'</span>]) {<br>
                    &nbsp;&nbsp;<span class="code-variable">$sql</span> = <span class="code-string">"SELECT * FROM usuarios WHERE rm = ?"</span>;<br>
                    &nbsp;&nbsp;<span class="code-variable">$stmt</span> = <span class="code-variable">$conn</span>-&gt;<span class="code-variable">prepare</span>(<span class="code-variable">$sql</span>);<br>
                    &nbsp;&nbsp;<span class="code-variable">$stmt</span>-&gt;<span class="code-variable">bind_param</span>(<span class="code-string">"s"</span>, <span class="code-variable">$_POST</span>[<span class="code-string">'rm'</span>]);<br>
                    &nbsp;&nbsp;<span class="code-variable">$stmt</span>-&gt;<span class="code-variable">execute</span>();<br>
                    &nbsp;&nbsp;<span class="code-variable">$result</span> = <span class="code-variable">$stmt</span>-&gt;<span class="code-variable">get_result</span>();<br><br>
                    
                    &nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-variable">$result</span>-&gt;<span class="code-variable">num_rows</span> == 1) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">$usuario</span> = <span class="code-variable">$result</span>-&gt;<span class="code-variable">fetch_assoc</span>();<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-variable">password_verify</span>(<span class="code-variable">$_POST</span>[<span class="code-string">'senha'</span>], <span class="code-variable">$usuario</span>[<span class="code-string">'senha_hash'</span>])) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// DEFINE O PERFIL NA SESS√ÉO</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">$_SESSION</span>[<span class="code-string">'id'</span>] = <span class="code-variable">$usuario</span>[<span class="code-string">'id'</span>];<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">$_SESSION</span>[<span class="code-string">'rm'</span>] = <span class="code-variable">$usuario</span>[<span class="code-string">'rm'</span>];<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">$_SESSION</span>[<span class="code-string">'perfil'</span>] = <span class="code-variable">$usuario</span>[<span class="code-string">'perfil'</span>];<br><br>
                    
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-comment">// Redireciona conforme o perfil</span><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-keyword">if</span> (<span class="code-variable">$usuario</span>[<span class="code-string">'perfil'</span>] == <span class="code-string">'admin'</span>) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">header</span>(<span class="code-string">"Location: admin_dashboard.php"</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="code-keyword">else</span> {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="code-variable">header</span>(<span class="code-string">"Location: aluno_dashboard.php"</span>);<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>
                    &nbsp;&nbsp;}<br>
                    }<br>
                    <span class="code-keyword">?&gt;</span><br>
                </div>
            </div>
            
            <div class="explanation">
                <h2>üõ°Ô∏è Dupla Camada de Seguran√ßa</h2>
                <p><strong>1. Frontend (Visual):</strong> Oculta os links e bot√µes administrativos</p>
                <p><strong>2. Backend (Acesso):</strong> Bloqueia acesso direto √†s p√°ginas via URL</p>
                <p><strong>Resultado:</strong> O aluno nunca v√™ as op√ß√µes administrativas e n√£o consegue acess√°-las mesmo tentando diretamente pela URL.</p>
            </div>
        </div>
        
        <footer>
            <p>üîí <strong>Sistema Seguro:</strong> Oculta√ß√£o visual + Bloqueio de acesso real</p>
            <p>üéØ Cada usu√°rio v√™ apenas o que tem permiss√£o para usar</p>
        </footer>
    </div>
</body>
</html>